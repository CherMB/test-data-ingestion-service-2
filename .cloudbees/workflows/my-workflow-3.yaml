apiVersion: automation.cloudbees.io/v1alpha1
kind: workflow
name: My workflow

on:
  push:
    branches:
      - '**'

env:
  application_name: test-data-ingestion-2

permissions:
  scm-token-own: read
  scm-token-org: read
  id-token: write

jobs:
  build:
    steps:
      - name: Say hello
        uses: docker://golang:1.20.3-alpine3.17
        shell: sh
        run: |
          echo "hello world"

      - id: build
        name: Build using the shared action
        uses: calculi-corp/cb-internal-shared-actions/build@v3
        with:
          run-unit-test: "true"
          go-binary-build: "false"
          go-binary-name: ${{ env.application_name }}
          unit-test-percent: "26"

  
